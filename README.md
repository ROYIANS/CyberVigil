# 冬眠坟墓 | Cyber Vigil

> 在这里，死亡不是终结，而是休眠。

一个充满仪式感的情绪疗愈 Web 应用，提供一个数字化的"墓园"空间，让你以温柔而庄重的方式埋葬、纪念和释放自己的负面情绪、回忆或遗憾。

---

## ✨ 核心理念

**死亡不是终结，而是休眠；遗忘不是消失，而是藏匿。**

当生活中有些情绪、回忆或遗憾无法言说、无处安放时，这里是你的避风港。通过仪式化的方式，将它们"埋葬"在数字墓园中，既是告别，也是纪念。

---

## 🎯 核心功能

### 1. 🕯️ 仪式化葬礼（6步流程）

创建墓碑需要完成完整的葬礼仪式，每一步都充满象征意义：

| 步骤 | 名称 | 说明 |
|------|------|------|
| **0** | 倾诉 (Write) | 写下你想要"埋葬"的情绪、回忆或秘密 |
| **1** | 封存 (Seal) | 将情绪装入骨灰盒，完成封印 |
| **2** | 掘土 (Dig) | 点击铲子10次，挖出墓穴（有震动反馈） |
| **3** | 安放 (Place) | 将骨灰盒放入墓穴 |
| **4** | 掩土 (Cover) | 点击填土10次，让过去安息 |
| **5** | 刻碑 (Carve) | 输入墓主名称、生卒日期、立碑人信息 |

完成后，一座专属的数字墓碑就诞生了。

---

### 2. 🪦 墓园系统

#### 墓碑展示
- **传统竖排设计**：中文竖排布局，展现墓碑美学
- **墓碑内容**：
  - 中央：墓主名称（如"被偷走的夏天"）
  - 左侧：生于/卒于日期
  - 右侧：立碑人和创建日期
  - 底座：墓志铭（倾诉内容）

#### 互动祭奠
三种供品献祭方式，陪伴你纪念过去：

| 供品 | 效果 | 说明 |
|------|------|------|
| 🔥 上香 | 显示燃烧的香炉+烟雾动画 | 表达思念 |
| 🌸 献花 | 堆叠花束（最多3束） | 寄托哀思 |
| 💧 敬酒 | 显示酒杯 | 敬往事一杯 |

**供品特性**：
- 每个供品有 **1小时有效期**
- 过期后自动消失
- 献供品会重置"访问时间"

---

### 3. 🌦️ 动态天气系统

墓园天气会根据你对墓碑的"荒废程度"自动变化：

| 荒废时长 | 天气 | 含义 |
|----------|------|------|
| **< 1天** | ☀️ 晴天 | 被用心照料 |
| **1-3天** | 🌫️ 雾天 | 开始被遗忘 |
| **> 3天** | 🌧️ 雨天 | 长时间未访问 |

**夜间模式**（23:00-03:00）：
- 墓碑泛出幽蓝微光
- 边框发光效果
- 营造深夜墓园氛围

---

### 4. 🌱 杂草系统

- **24小时**不访问 → 墓碑周围长出杂草
- 点击杂草可以除草（象征重新关注）
- 视觉：4株不同位置的小草，有摇摆动画

---

### 5. 💌 梦境来信

**触发条件**：墓碑超过 **12小时** 未访问

系统会随机生成一封来自"墓主"的梦境信件，比如：
- *"梦里你好像又在犹豫什么…不过，那条围巾，你还是围上了呀？"*
- *"昨晚有只猫踩过了我的头顶，它好像在找什么东西，是你吗？"*
- *"别担心，这里的土很暖和，像冬天的被窝。"*

你可以选择：
- **💾 珍藏**：保存到收藏夹
- **🔥 焚烧**：让信件消失

---

### 6. 👻 守墓人 - 齐默默（AI聊天）

当你需要倾诉时，守墓人齐默默会陪伴你。

#### 角色设定
- **姓名**：齐默默
- **人格**：INFP男生，温柔、共情、诗意、忧郁
- **说话风格**：
  - 使用隐喻："情绪像长满青苔的石头"
  - 简短温暖：像"深夜的热茶"
  - 不评判，只陪伴

#### 功能特性
- 基于 OpenAI API（或兼容服务）
- 保留对话历史
- 支持自定义 API Key、Base URL、模型

---

## 🎨 设计亮点

### 视觉风格
- **深色美学**：以 `stone-900`、`stone-800` 为主色调
- **衬线字体**：增强仪式感和文学气息
- **竖排文字**：传统墓碑风格
- **噪点纹理**：营造纸质质感

### 动画效果
- ✨ 淡入淡出过渡
- 🔥 火焰/烟雾粒子动画
- 🌱 杂草摇摆动画
- 💫 夜间发光效果
- 📬 信件弹跳提示

### 交互细节
- 挖掘/填土时有震动反馈
- 供品有消失倒计时
- 切换墓碑有流畅过渡
- 夜间模式平滑变化

---

## 📊 核心时间机制

| 事件 | 时长 | 触发效果 |
|------|------|----------|
| 供品有效期 | 1小时 | 自动消失 |
| 长草阈值 | 24小时 | 墓碑周围长杂草 |
| 信件生成 | 12小时 | 产生一封梦境来信 |
| 迷雾天气 | 1-3天 | 墓园显示雾天 |
| 雨天天气 | >3天 | 墓园下雨 |
| 夜间模式 | 23:00-03:00 | 墓碑泛蓝光 |

---

## 🔧 技术栈

| 分类 | 技术 |
|------|------|
| **框架** | React 18.2 + TypeScript |
| **构建工具** | Vite 5.0 |
| **样式** | Tailwind CSS 3.3 |
| **图标库** | Lucide React |
| **AI服务** | OpenAI API（兼容） |
| **数据存储** | LocalStorage（纯前端） |

---

## 🚀 快速开始

### 安装依赖
```bash
npm install
# 或
pnpm install
```

### 开发模式
```bash
npm run dev
```

### 生产构建
```bash
npm run build
```

### 预览构建结果
```bash
npm run preview
```

---

## ⚙️ AI 配置

要使用"齐默默"聊天功能，需要配置 AI 服务：

1. 点击墓园右上角的 **⚙️ 设置** 按钮
2. 填写以下信息：
   - **API Key**：OpenAI 或兼容服务的密钥
   - **Base URL**：默认 `https://api.openai.com/v1`
   - **模型**：默认 `gpt-3.5-turbo`
3. 保存后即可与齐默默对话

> **提示**：支持所有 OpenAI API 兼容的服务（如 Azure OpenAI、Claude、国内大模型等）

---

## 💾 数据存储

项目使用浏览器 LocalStorage 存储，无需后端服务器：

### 存储项 1：`cyber-vigil-graves`
```typescript
interface Grave {
  id: number;           // 唯一标识
  title: string;        // 墓主名称
  content: string;      // 墓志铭（倾诉内容）
  bornDate: string;     // 生于
  deathDate: string;    // 卒于
  erector: string;      // 立碑人
  createDate: string;   // 创建日期
  lastVisit: number;    // 最后访问时间戳
  offerings: Offering[]; // 供品列表
  hasLetter?: boolean;  // 是否有未读信件
  savedLetters?: string[]; // 收藏的信件
}
```

### 存储项 2：`cyber-vigil-ai-config`
```typescript
interface AIConfig {
  apiKey: string;
  baseUrl: string;
  model: string;
}
```

---

## 🎮 用户流程

```
入口
 ├─ 进入墓园
 │   └─ 查看墓碑
 │       ├─ 上香/献花/敬酒
 │       ├─ 除草
 │       ├─ 查看梦境来信
 │       │   ├─ 珍藏
 │       │   └─ 焚烧
 │       └─ 与齐默默聊天
 └─ 开始葬礼
     └─ 6步仪式
         ├─ 倾诉
         ├─ 封存
         ├─ 掘土
         ├─ 安放
         ├─ 掩土
         └─ 刻碑
             → 创建新墓碑
```

---

## 🌟 情感设计理念

### 1. 仪式感
通过6步葬礼流程，让"放下"成为一种庄重的仪式，而非简单的删除或遗忘。

### 2. 陪伴感
齐默默的AI聊天提供温暖的倾听，让你不再孤单。

### 3. 疗愈性
- **倾诉**：释放压抑情绪
- **封存**：象征性告别
- **祭奠**：持续的情感连接
- **对话**：获得温柔的回应

### 4. 诗意表达
用隐喻化解沉重：
- "死亡是休眠"而非终结
- "情绪像长满青苔的石头"
- "眼泪是云的碎片"

### 5. 时间感
天气变化、杂草生长、信件到来，提醒用户"时间在流逝，但记忆依然在"。

---

## 🎯 适用人群

这是一个**情绪管理 + 心理疗愈**的创意应用，适合：
- 🥀 经历失恋、失去的人
- 🚪 需要告别过去的人
- 💬 有倾诉需求但缺乏倾听者的人
- 🎭 喜欢仪式感的文艺青年
- 🌙 需要情绪出口的深夜失眠者

---

## 📂 项目结构

```
grave/
├── src/
│   ├── components/
│   │   ├── Entrance.tsx          # 入口界面
│   │   ├── RitualProcess.tsx     # 6步葬礼流程
│   │   ├── Cemetery.tsx          # 墓园主界面
│   │   ├── Atmosphere.tsx        # 天气系统
│   │   ├── DreamLetterModal.tsx  # 梦境来信弹窗
│   │   ├── ChatModal.tsx         # AI聊天界面
│   │   ├── SettingsModal.tsx     # 设置界面
│   │   └── OfferingBtn.tsx       # 供品按钮组件
│   ├── utils/
│   │   └── aiService.ts          # AI服务封装
│   ├── App.tsx                    # 主应用
│   ├── main.tsx                   # 入口文件
│   └── index.css                  # 全局样式
├── public/
├── index.html
├── package.json
├── vite.config.ts
├── tailwind.config.js
└── README.md
```

---

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

如果你有好的想法或发现了 Bug，请随时告诉我们。

---

## 📜 开源协议

MIT License

---

## 💭 最后

> "也许有一天，我不记得当初为什么想藏起来，但我记得，在这片草地上，我安静地，留下过一颗泪珠。"
>
> —— 梦境来信之一

**冬眠坟墓**不是让你遗忘过去，而是用温柔的方式，帮助你与过去和解。

愿每一个来到这里的人，都能找到内心的平静。

---

Made with 💙 by ROYIANS
